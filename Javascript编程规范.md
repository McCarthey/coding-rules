# JavaScript编程风格

命名风格遵循JavaScript的规范。特别是命名风格。统一了大家协作互相调用的时候才不会出现拼写错误。并且好的编程风格可以有助于写出质量更高，错误更少，易于维护的程序。使代码更清晰易懂。

## 1. 缩进
每一行的层级由4个空格组成，避免使用Tab进行缩进。

    //好的写法
    if (true) {
        doSomeThing();
    }

## 2. 行的长度
每行长度不应超过80个字符。如果一行超过80个字符，应当在一个运算符后换行。下一行应当增加两级缩进（8个字符）。

    //好的写法
    doSomething(argument1,argument2,argument3,argument4,
            argument5);

    //不好的写法：第二行只有4个空格
    doSomething(argument1,argument2,argument3,argument4,
        argument5);

## 3. 原始值
**字符串** 应当始终使用双引号且保持一行，避免在字符串中使用斜线另起一行。

**数字** 应当使用十进制整数，科学计算法表示整数，十六进制整数，或者十进制浮点小数，小数前后应当至少保留一位数字。避免使用八进制直接量。

**特殊值null** 除了下述情况下应当避免使用。
- 用来初始化一个变量，这个变量可能被赋值为一个对象。
- 用来和一个已经初始化的变量比较，这个变量可以是也可以不是一个对象。
- 当函数的参数期望是对象时，被用作参数传入。
- 当函数的返回值期望是对象时，被用作返回值传出。

**特殊值undefined** 应避免使用。

判断一个变量是否定义应当使用 **typeof操作符** 

## 4. 运算符间距
二元运算符前后必须使用一个空格来保持表达式的整洁。操作符包括**赋值运算符**和**逻辑运算符**。

    //好的写法
    for (var i = 0; i < count; i++) {
        process(i);
    }

    //不好的写法：丢失了空格
    for (var i=0; i<count; i++>) {
        process(i);
    }
## 5. 括号间距
当使用括号时，紧接左括号之后和紧接右括号之前不应该有空格。
    
    //好的写法
    for (var i = 0; i < count; i++) {
        process(i);
    }

    //不好的写法:参数两边有额外的空格
    for ( var i = 0; i < count; i++ ) {
        process( i );
    }
## 6. 对象直接量
对象直接量应当有如下格式：
- 起始左花括号应当同表达式保持同一行。
- 每个属性的名值对应当保持一个缩进，第一个应当在左花括号后另起一行。
- 每个属性的名值对应当使用不含引号的属性名，其后紧跟一个冒号（之前不含空格），其后是值。
- 倘若属性值是函数类型，函数体应当在属性名之下另起一行，而且其前后均应保留一个空行。
- 一组相关的属性前后可以插入空行以提升代码的可读性。
- 结束的右花括号应当独占一行。

        //好的写法
        var object = {

            key1: value1,
            key2: value2,

            func: function(){
                //doSomething
            },

            key3: value3
        };
        
        //不好的写法: 不恰当的缩进
        var object = {
                key1: value1,
                key2: value2
        };
        
        //不好的写法：函数体周围缺少空行
        var object = {

            key1: value1,
            key2: value2,
            func: function() {
                //doSomething
            },
            key3:value3
        }

当**对象字面量最为函数参数**时，如果值是变量，起始花括号应当同函数名在同一行。所有其余先前列出的规则同样适用。

    //好的写法
    doSomething({
        key1: value1,
        key2: value2
    });

    //不好的写法：所有代码在一行
    doSomething({ key1: value1, key2: value2 });

## 7. 注释
使用简洁明了的注释有助于他人理解你的代码。如下情况应当使用注释。
- 代码晦涩难懂。
- 可能被误认为错误的代码。
- 必要但不明显的针对特定浏览器的代码。
- 对于对象、方法或者属性，生成文档时有必要的（使用恰当的文档注释）。

#### **单行注释**
单行注释应当用来说明一行代码或者一组相关的代码。单行注释可能有三种使用方式。
- 独占一行的注释，用来解释下一行代码。
- 在代码行的尾部的注释，用来解释它之前的代码。
- 多行，用来注释掉一个代码块。

        //好的写法
        if (condition) {

            //如果代码执行到这里，则表明通过了所有安全检查
            allowed();
        }

        //不好的写法：注释之前没有空行
        if (condition) {
            //如果代码执行到这里，则表明通过了所有安全检查
            allowed();
        }

        //不好的写法：错误的缩进
        if (condition) {

        //如果代码执行到这里，则表明通过了所有安全检查
            allowed();
        }

        //不好的写法：应当使用多行注释
        //这段代码进行**判断
        //然后执行
        if (condition) {

            //如果代码执行到这里，则表明通过了所有安全检查
            allowed();
        }

        //好的写法：在行尾注释时，代码结尾和注释间应保留一个空格
        if (condition) {

            //如果代码执行到这里，则表明通过了所有安全检查
            allowed(); //执行**函数
        }

        //不好的写法：代码和注释间没有足够的空格
        if (condition) {

            //如果代码执行到这里，则表明通过了所有安全检查
            allowed();//执行**函数
        }

        //好的写法：在注释掉一个代码块时，应使用单行注释，多行注释不应当使用在此种情况下。
        // if (condition) {
        //     allowed();//执行**函数
        // }

#### **多行注释**
多行注释应当在代码需要更多文字去解释的时候使用。每个多行注释都至少符合以下三点：
- 首行仅仅包括/*注释开始。该行不应当由其他文字。
- 接下来的行以*开头并保持左对齐。这些可以有文字描述。
- 最后一行以*/开头并同先前行保持对齐。也不应有其他文字。

多行注释的首行应当保持同他描述代码的相同层次的缩进。后续的每行应当有同样层次的缩进并附加一个空格（为了适当保持*字符的对齐）。每一个多行代码之前应当预留一个空行。

    //好的写法
    if (condition) {

        /*
        *如果代码执行到这里
        *说明通过了所有的安全检查
        */
        allowed();
    }
#### **注释声明**
注释有时候也可以用来给一段代码声明额外的信息。这些声明的格式以单个单词打头并紧跟一个冒号。可以使用的声明如下：
- **TODO**:说明代码还为完成。应当包含下一步要做的事。
- **HACK**:表明代码实现走了一个捷径。应当包含为何使用hack的原因。这样可能表明该问题可能有更好的解决办法。
- **XXX**:说明代码是有问题的并应当尽快修复。
- **FIXME**:说明代码是有问题的并应当尽快修复。重要性略次于XXX。
- **REVIEW**:说明代码有任可能的改动都需要评审。
这些声明可能在一行或多行注释中使用，并且应当遵循同一般注释类型相同的格式规则。

## 8. 命名
变量和函数在命名时应当小心。命名应仅限于数字字母字符，某些情况下可以使用下划线(_)。最好不要在任何命名中使用($)或者反斜杠(\\)。
**变量命名**应采用驼峰命名格式，首字母小写，每个单词首字母大写。变量名的第一个单词应当是一个名词（而非动词）以避免和函数混淆。**不要在变量中使用下划线**。
    
    //好的写法
    var accountNumber = "test001";

    //不好的写法：大写字母开头
    var AccountNumber = "test001";

    //不好的写法：动词开头
    var getAccountNumber = "test001";

    //不好的写法：使用下划线
    var account_number = "test001";

**函数命名**也应当采用驼峰命名格式。函数名的第一个单词应当是动词（而非名词）来避免同变量混淆。函数名中最好不要使用下划线。

    //好的写法
    function doSomething() {
        //code
    }

    //不好的写法：大写字母开头
    function DoSomething() {
        //code
    }

    //不好的写法：名词开头 
    function something() {
        //code
    }

    //不好的写法：使用下划线
    function do_something() {
        //code
    }

**构造函数**————通过new运算符创建新对象的函数————也应当以驼峰格式命名，并且首字母大写。构造函数名称应当以非动词开头，因为new代表着创建一个对象实例的操作。

    //好的写法
    function MyObject() {
        //code
    }

    //不好的写法：小写字母开头
    function myObject() {
        //code
    }

    //不好的写法：使用下划线
    function my_object() {
        //code
    }

    //不好的写法：动词开头
    function getMyObject() {
        //code
    }

**常量**（值不会被改变的变量）的命名应当是所有大写字母，不同单词之间单个下划线隔开。

    //好的写法
    var TOTAL_COUNT = 10;

    //不好的写法：驼峰式
    var totalCount = 10;

    //不好的写法：混合形式
    var total_COUNT = 10;
**对象的属性**同变量的命名规则相同。对象的方法和函数的命名规则相同。如果属性或者方法是私有的，应当在之前加上一个下弧线。

    //好的写法
    var object = {
        _count: 10,
        _getCount: function() {
            return this._count;
        }
    }

## 9. 变量与函数声明
#### **变量声明**
所有的变量在使用前都应该事先定义。变量定义应当放在函数开头，使用一个var关键字每行一个变量。除了首行，所有行都应当多一层缩进以使变量名能够垂直方向对齐。变量定义时应当初始化，并且赋值操作符应当保持一致的缩进。初始化的变量应当在未初始化变量之前。

    //好的写法
    var count = 10,
        name = "jeri",
        found = false,
        emptp;
#### **函数声明**
函数应当在使用前提前定义。一个不是作为方法的函数（也就是说没有作为一个对象的属性）应当使用函数定义的额格式（不是函数表达式和Function构造器格式）。函数名和开始圆括号之间不应当有空格。结束的圆括号和右边的花括号之间应当留一个空格。右侧的花括号应当同function关键字保持用一行。开始和结束括号之间不应该有空格。参数名之间应当在逗号之后保留一个空格。函数体应当保持一级缩进。

    //好的写法
    function outer() {
        var count = 10,
            name = "jeri",
            found = false,
            empty;
        function inner () {
            //code
        }
        //调用inner()的代码
    }
    

**匿名函数**可能作为方法赋值给对象，或者作为其他函数的参数。function关键字同开始括号之间不应该有空格。

    //好的写法
    object.method = function() {
        //code
    };

    //不好的写法：不正确的空格
    object.method = function () {
        //code
    };


**立即被调用的函数**应当在函数调用的外层用圆括号包裹。

    //好的方法
    var value = (function() {
        
        //函数体

        return {
            message:"hi"
        }
    }());

#### **严格模式**
严格模式应当仅限在函数内部使用，千万不要在全局使用。

    //不好的写法：全局使用严格模式
    "use strict";

    function doSomething() {
        //code
    }

    //好的写法
    function doSomething() {
        "use strict";

        //code
    }

## 10. 运算符
#### **赋值**
给变量赋值时，如果右侧是含有比较语句的表达式，需要用圆括号包裹。

    //好的写法
    var flag = (i < count);

    //不好的写法
    var flag = i < count;
#### **等号运算符**
使用===（严格等于）和!==（严格不相等）代替==（相等）和!=（不等）来避免弱类型转换错误。

    //好的写法
    var same = (a === b);

    //不好的写法
    var same = (a == b);
#### **三元操作符**
三元操作符应当仅仅用在条件赋值语句中，而不要作为if语句的替代品。

    //好的写法
    var value = condition ? value1 : value2;

    //不好的写法：没有赋值，应当使用if表达式
    condition ? doSomething() : doSomethingElse();

## 11. 语句
#### **简单语句**
每一行最多只包含一条语句。所有简单的语句都应该以分号(;)结束。

    //好的写法
    count++;
    a = b;
    
    //不好的写法：多个表达式写在一行
    count++; a = b;
#### **返回语句**
返回语句当返回一个值的时候不应当使用圆括号包裹，除非在某些情况下这么做可以让返回值更容易理解。例如：

    return;

    return collection.size();

    return (size > 0 ? size : defaultSize);
#### **复合语句**
复合语句是大括号括起来的语句列表。
- 括起来的语句应当较复合语句多缩进一个层级。
- 开始的大括号应当在复合语句所在行的末尾；结束的大括号应当独占一行且同复合语句的开始保持同样的缩进。
- 当语句是控制结构的一部分时，诸如if或者for语句，所有语句都需要用大括号括起来，也包括单个语句。这个约定使得我们更当便地添加语句而不用担心忘记加括号而引起bug。
- 像if一样的语句开始的关键词，其后应该紧跟一个空格，起始大括号应当在空格之后。

#### **if语句**
if 语句应当是下面的格式。

    if (condition) {
        statements
    }

    if (condition) {
        statements
    } else {
        statements
    }

    if (condition) {
        statements
    } else if (condition) {
        statements
    } else {
        statements
    }
绝不允许在if语句中省略花括号。

    //好的写法
    if (condition) {
        doSomething();
    }

    //不好的写法：不恰当的空格
    if (condition){
        doSomething();
    }

    //不好的写法：所有代码都在一行
    if (condition) { doSomething(); }

    //不好的写法：所有代码都在一行且没有花括号
    if (condition) doSomething();

#### **for语句**
for类型的语句应当是下面的格式。

    for (initialization; condition; update) {
        statements
    }

    for (variable in object) {
        statement
    }

for语句的初始化部分不应当有变量声明。

    //好的部分
    var i,
        len;

    for (i = 0, len = 0; i < len; i++) {
        //code
    }

    //不好的写法：初始化时声明变量
    

